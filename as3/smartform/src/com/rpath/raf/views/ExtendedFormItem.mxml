<?xml version="1.0" encoding="utf-8"?>
<!--
/*
#
# Copyright (c) 2009 rPath, Inc.
#
# This program is distributed under the terms of the MIT License as found 
# in a file called LICENSE. If it is not present, the license
# is always available at http://www.opensource.org/licenses/mit-license.php.
#
# This program is distributed in the hope that it will be useful, but
# without any waranty; without even the implied warranty of merchantability
# or fitness for a particular purpose. See the MIT License for full details.
*/
-->

<mx:FormItem xmlns:mx="http://www.adobe.com/2006/mxml"
    xmlns:views="com.rpath.raf.views.*"
    creationComplete="onCreationComplete(event)"
    width="100%"
    >

    
    <mx:Metadata>
        [Event(name=HelpEvent.SHOW_HELP, type="mx.events.HelpEvent")]
    </mx:Metadata>

    <mx:Script>
    <![CDATA[
        import com.rpath.raf.events.HelpEvent;
        import mx.controls.Label;
        import mx.events.FlexEvent;
        import flash.net.URLRequest;
        import flash.net.navigateToURL;


    [Bindable]
    public var helpLink:String;

    [Bindable]
    public var helpText:String;

    [Bindable]
    public var helpNode:XMLList;

    [Bindable]
    public var helpKey:String;

 
    public function onCreationComplete(event:FlexEvent):void
    {
        if ((helpNode && helpNode.length() > 0) || helpKey || (helpLink && helpLink != "") || (helpText && helpText != ""))
        {
            var lbl:Label = FormItem(event.currentTarget).itemLabel as Label;
            lbl.selectable = true;
            lbl.enabled = true;
            lbl.setStyle("color", "blue");
            lbl.setStyle("textDecoration", "underline");
            lbl.toolTip = "Click here for more information";
            lbl.useHandCursor = true;
            lbl.buttonMode = true;
            lbl.mouseChildren = false;
            lbl.addEventListener(MouseEvent.CLICK, handleHelp,false,0,true);
        }
    }


    protected function handleHelp(event:MouseEvent):void
    {
        var evt:HelpEvent = new HelpEvent(HelpEvent.SHOW_HELP, true);
        if (helpText && helpText != "")
            evt.text = helpText;
        if (helpNode && helpNode.length() > 0)
            evt.node = helpNode;
        if (helpKey && helpKey != "")
            evt.key = helpKey;
        dispatchEvent(evt);
    }
        
    ]]>
    </mx:Script>
</mx:FormItem>
